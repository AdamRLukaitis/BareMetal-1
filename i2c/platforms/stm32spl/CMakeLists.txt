FIND_PACKAGE(CMSIS REQUIRED)
FIND_PACKAGE(StdPeriphLib REQUIRED)

INCLUDE_DIRECTORIES(
    ${CMAKE_SOURCE_DIR}/include
    ${CMSIS_INCLUDE_DIR}
    ${StdPeriphLib_INCLUDE_DIR}
    ${CMAKE_CURRENT_SOURCE_DIR}
)

SET(BAREMETAL_I2C_SOURCES
    i2c_stm32spl.c
)

STM32_GENERATE_LIBRARIES(bm_i2c_stm32spl ${BAREMETAL_I2C_SOURCES} BAREMETAL_I2C_LIBRARIES)
INSTALL(TARGETS ${BAREMETAL_I2C_LIBRARIES} RUNTIME DESTINATION bin LIBRARY DESTINATION lib ARCHIVE DESTINATION lib)